<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Hngle - Welcome to the Galaxy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            position: relative;
        }
        
        canvas { 
            display: block; 
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* Welcome Overlay */
        .welcome-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-start;
            pointer-events: none;
            padding: 2rem;
        }

        .welcome-content {
            color: white;
            pointer-events: auto;
            animation: fadeInUp 2s ease-out;
            display: flex;
            flex-direction: column;
        }

        .welcome-top {
            text-align: center;
            align-self: center;
        }

        .welcome-bottom {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            max-width: 500px;
            gap: 1.5rem;
        }

        .welcome-title {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .welcome-subtitle {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .welcome-description {
            font-size: 1.1rem;
            opacity: 0.8;
            line-height: 1.6;
            text-align: left;
        }

        .portfolio-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 2.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            align-self: flex-start;
        }

        .portfolio-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s;
        }

        .portfolio-btn:hover::before {
            left: 100%;
        }

        .portfolio-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
        }

        .portfolio-btn i {
            font-size: 1.2rem;
        }

        /* Bottom Section */
        .bottom-section {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            animation: fadeInUp 3s ease-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .portfolio-btn-bottom {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 2.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }

        .portfolio-btn-bottom::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s;
        }

        .portfolio-btn-bottom:hover::before {
            left: 100%;
        }

        .portfolio-btn-bottom:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
        }

        .portfolio-btn-bottom i {
            font-size: 1.2rem;
        }

        /* Instructions */
        .galaxy-instructions {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .galaxy-instructions p {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .galaxy-instructions i {
            color: #48dbfb;
        }

        /* Skip Button */
        .skip-btn {
            position: absolute;
            top: 2rem;
            right: 2rem;
            z-index: 10;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .skip-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-overlay {
                padding: 1.5rem 1rem;
            }
            
            .welcome-title {
                font-size: 2.5rem;
            }
            
            .welcome-subtitle {
                font-size: 1.2rem;
            }
            
            .welcome-bottom {
                align-items: center;
                text-align: center;
            }
            
            .welcome-description {
                font-size: 1rem;
                max-width: 100%;
                text-align: center;
            }
            
            .bottom-section {
                bottom: 1rem;
                gap: 1.5rem;
            }
            
            .portfolio-btn-bottom {
                padding: 1rem 2rem;
                font-size: 1rem;
            }
            
            .skip-btn {
                top: 1rem;
                right: 1rem;
                padding: 0.5rem 1rem;
            }
            
            .galaxy-instructions {
                font-size: 0.8rem;
            }
        }

        /* Loading Animation */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: white;
            transition: opacity 1s ease-out;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #48dbfb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        .loading-text {
            font-size: 1.1rem;
            font-weight: 300;
            opacity: 0.8;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Đang khởi tạo dải ngân hà...</div>
    </div>

    <!-- Skip Button -->
    <a href="index.html" class="skip-btn">
        <i class="fas fa-forward"></i> Xem hồ sơ
    </a>

    <!-- Welcome Overlay -->
    <div class="welcome-overlay">
        <div class="welcome-content welcome-top">
            <h1 class="welcome-title">Hngle</h1>
            <h2 class="welcome-subtitle">🚀 Developer & AI Researcher</h2>
        </div>
    </div>

    <!-- Bottom Section -->
    <div class="bottom-section">
        <a href="index.html" class="portfolio-btn-bottom pulse">
            <i class="fas fa-rocket"></i>
            Khám phá Portfolio
        </a>
        
        <div class="galaxy-instructions">
            <p><i class="fas fa-mouse"></i> Kéo để xoay galaxy</p>
            <p><i class="fas fa-scroll"></i> Cuộn để zoom</p>
        </div>
    </div>

    <canvas></canvas>
    <script type="module">
        import { AdditiveBlending, BufferAttribute, BufferGeometry, CanvasTexture, Color, PerspectiveCamera, Points, RawShaderMaterial, Scene, WebGLRenderer } from "https://cdn.skypack.dev/three@0.136.0"
import { OrbitControls } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls"
import { TWEEN } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/libs/tween.module.min.js"


const canvas = document.querySelector('canvas');
console.clear()
// ------------------------ //
// SETUP

const count = 128 ** 2

const scene = new Scene()

const camera = new PerspectiveCamera(
  60, innerWidth / innerHeight, 0.1, 100
)
camera.position.set(0, 2, 3)

const renderer = new WebGLRenderer({ canvas })
renderer.setSize(innerWidth, innerHeight)
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))

const orbit = new OrbitControls(camera, canvas)



// ------------------------ //
// STAR ALPHA TEXTURE

const ctx = document.createElement("canvas").getContext("2d")
ctx.canvas.width = ctx.canvas.height = 32

ctx.fillStyle = "#000"
ctx.fillRect(0, 0, 32, 32)

let grd = ctx.createRadialGradient(16, 16, 0, 16, 16, 16)
grd.addColorStop(0.0, "#fff")
grd.addColorStop(1.0, "#000")
ctx.fillStyle = grd
ctx.beginPath()
ctx.rect(15, 0, 2, 32)
ctx.fill()
ctx.beginPath()
ctx.rect(0, 15, 32, 2)
ctx.fill()

grd = ctx.createRadialGradient(16, 16, 0, 16, 16, 16)
grd.addColorStop(0.1, "#ffff")
grd.addColorStop(0.6, "#0000")
ctx.fillStyle = grd
ctx.fillRect(0, 0, 32, 32)

const alphaMap = new CanvasTexture(ctx.canvas)



// ------------------------ //
// GALAXY

const galaxyGeometry = new BufferGeometry()

const galaxyPosition = new Float32Array(count * 3)
const galaxySeed = new Float32Array(count * 3)
const galaxySize = new Float32Array(count)

for (let i = 0; i < count; i++) {
  galaxyPosition[i * 3] = i / count
  galaxySeed[i * 3 + 0] = Math.random()
  galaxySeed[i * 3 + 1] = Math.random()
  galaxySeed[i * 3 + 2] = Math.random()
  galaxySize[i] = Math.random() * 2 + 0.5
}

galaxyGeometry.setAttribute(
  "position", new BufferAttribute(galaxyPosition, 3)
)
galaxyGeometry.setAttribute(
  "size", new BufferAttribute(galaxySize, 1)
)
galaxyGeometry.setAttribute(
  "seed", new BufferAttribute(galaxySeed, 3)
)



const innColor = new Color("#f40")
const outColor = new Color("#a7f")

const galaxyMaterial = new RawShaderMaterial({

  uniforms: {
    uTime: { value: 0 },
    uSize: { value: renderer.getPixelRatio() },
    uBranches: { value: 3 },
    uRadius: { value: 0 },
    uSpin: { value: Math.PI * 0.25 },
    uRandomness: { value: 0 },
    uAlphaMap: { value: alphaMap },
    uColorInn: { value: innColor },
    uColorOut: { value: outColor },
  },

  vertexShader:
`
precision highp float;

attribute vec3 position;
attribute float size;
attribute vec3 seed;
uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float uTime;
uniform float uSize;
uniform float uBranches;
uniform float uRadius;
uniform float uSpin;
uniform float uRandomness;

varying float vDistance;

#define PI  3.14159265359
#define PI2 6.28318530718

#include <random, scatter>



void main() {

  vec3 p = position;
  float st = sqrt(p.x);
  float qt = p.x * p.x;
  float mt = mix(st, qt, p.x);

  // Offset positions by spin (farther wider) and branch num
  float angle = qt * uSpin * (2.0 - sqrt(1.0 - qt));
  float branchOffset = (PI2 / uBranches) * floor(seed.x * uBranches);
  p.x = position.x * cos(angle + branchOffset) * uRadius;
  p.z = position.x * sin(angle + branchOffset) * uRadius;

  // Scatter positions & scale down by Y-axis
  p += scatter(seed) * random(seed.zx) * uRandomness * mt;
  p.y *= 0.5 + qt * 0.5;

  // Rotate (center faster)
  vec3 temp = p;
  float ac = cos(-uTime * (2.0 - st) * 0.5);
  float as = sin(-uTime * (2.0 - st) * 0.5);
  p.x = temp.x * ac - temp.z * as;
  p.z = temp.x * as + temp.z * ac;



  vDistance = mt;

  vec4 mvp = modelViewMatrix * vec4(p, 1.0);
  gl_Position = projectionMatrix * mvp;
  gl_PointSize = (10.0 * size * uSize) / -mvp.z;
}
`,

  fragmentShader:
`
precision highp float;

uniform vec3 uColorInn;
uniform vec3 uColorOut;
uniform sampler2D uAlphaMap;

varying float vDistance;

#define PI  3.14159265359



void main() {
  vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);
  float a = texture2D(uAlphaMap, uv).g;
  if (a < 0.1) discard;

  vec3 color = mix(uColorInn, uColorOut, vDistance);
  float c = step(0.99, (sin(gl_PointCoord.x * PI) + sin(gl_PointCoord.y * PI)) * 0.5);
  color = max(color, vec3(c));

  gl_FragColor = vec4(color, a);
}
`,

  transparent: true,
  depthTest: false,
  depthWrite: false,
  blending: AdditiveBlending,
})



const galaxy = new Points(galaxyGeometry, galaxyMaterial)
galaxy.material.onBeforeCompile = (shader) => {
  shader.vertexShader = shader.vertexShader
    .replace("#include <random, scatter>", shaderUtils)
}
scene.add(galaxy)



// ------------------------ //
// UNIVERSE

const universeGeometry = new BufferGeometry()

const universePosition = new Float32Array(count * 3 / 2)
const universeSeed = new Float32Array(count * 3 / 2)
const universeSize = new Float32Array(count / 2)

for (let i = 0; i < count / 2; i++) {
  universeSeed[i * 3 + 0] = Math.random()
  universeSeed[i * 3 + 1] = Math.random()
  universeSeed[i * 3 + 2] = Math.random()
  universeSize[i] = Math.random() * 2 + 0.5
}

universeGeometry.setAttribute(
  "position", new BufferAttribute(universePosition, 3)
)
universeGeometry.setAttribute(
  "seed", new BufferAttribute(universeSeed, 3)
)
universeGeometry.setAttribute(
  "size", new BufferAttribute(universeSize, 1)
)



const universeMaterial = new RawShaderMaterial({

  uniforms: {
    uTime: { value: 0 },
    uSize: galaxyMaterial.uniforms.uSize,
    uRadius: galaxyMaterial.uniforms.uRadius,
    uAlphaMap: galaxyMaterial.uniforms.uAlphaMap,
  },

  vertexShader:
`
precision highp float;

attribute vec3 seed;
attribute float size;
uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float uTime;
uniform float uSize;
uniform float uRadius;

#define PI  3.14159265359
#define PI2 6.28318530718

#include <random, scatter>

// Universe size factor
const float r = 3.0;
// Scale universe sphere 
const vec3 s = vec3(2.1, 1.3, 2.1);



void main() {

  vec3 p = scatter(seed) * r * s;

  // Sweep to center
  float q = random(seed.zx);
  for (int i = 0; i < 3; i++) q *= q;
  p *= q;

  // Sweep to surface
  float l = length(p) / (s.x * r);
  p = l < 0.001 ? (p / l) : p;

  // Rotate (center faster)
  vec3 temp = p;
  float ql = 1.0 - l;
  for (int i = 0; i < 3; i++) ql *= ql;
  float ac = cos(-uTime * ql);
  float as = sin(-uTime * ql);
  p.x = temp.x * ac - temp.z * as;
  p.z = temp.x * as + temp.z * ac;



  vec4 mvp = modelViewMatrix * vec4(p * uRadius, 1.0);
  gl_Position = projectionMatrix * mvp;

  // Scale up core stars
  l = (2.0 - l) * (2.0 - l);

  gl_PointSize = (r * size * uSize * l) / -mvp.z;
}
`,

  fragmentShader:
`
precision highp float;

uniform sampler2D uAlphaMap;

#define PI 3.14159265359

void main() {
  vec2 uv = vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y);
  float a = texture2D(uAlphaMap, uv).g;
  if (a < 0.1) discard;

  gl_FragColor = vec4(vec3(1.0), a);
}
`,

  transparent: true,
  depthTest: false,
  depthWrite: false,
  blending: AdditiveBlending,
})



const universe = new Points(universeGeometry, universeMaterial)
universe.material.onBeforeCompile = (shader) => {
  shader.vertexShader = shader.vertexShader
    .replace("#include <random, scatter>", shaderUtils)
}
scene.add(universe)



// ------------------------ //
// GALAXY SETTINGS (No GUI)

const u = galaxyMaterial.uniforms



// ------------------------ //
// ANIMATION

new TWEEN.Tween({
  radius: 0,
  spin: 0,
  randomness: 0,
  rotate: 0,
}).to({
  radius: 1.618,
  spin: Math.PI * 3,
  randomness: 0.5,
  rotate: Math.PI * 4,
})
.duration(5000)
.easing(TWEEN.Easing.Cubic.InOut)
// .repeat(Infinity)
// .repeatDelay(1000)
// .yoyo(true)
.onUpdate(({ radius, spin, randomness, rotate }) => {
  u.uRadius.value = radius
  u.uSpin.value = spin
  u.uRandomness.value = randomness

  galaxy.rotation.y = rotate
  universe.rotation.y = rotate / 3
})
.start()



// ------------------------ //
// LOOPER

const t = 0.001
renderer.setAnimationLoop(() => {
  galaxyMaterial.uniforms.uTime.value += t / 2
  universeMaterial.uniforms.uTime.value += t / 3
  TWEEN.update()
  orbit.update()
  renderer.render(scene, camera)
})



// ------------------------ //
// HELPERS

addEventListener("resize", () => {
  camera.aspect = innerWidth / innerHeight
  camera.updateProjectionMatrix()
  renderer.setSize(innerWidth, innerHeight)  
})

const shaderUtils =
`
float random (vec2 st) {
  return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);
}

vec3 scatter (vec3 seed) {
  float u = random(seed.xy);
  float v = random(seed.yz);
  float theta = u * 6.28318530718;
  float phi = acos(2.0 * v - 1.0);

  float sinTheta = sin(theta);
  float cosTheta = cos(theta);
  float sinPhi = sin(phi);
  float cosPhi = cos(phi);

  float x = sinPhi * cosTheta;
  float y = sinPhi * sinTheta;
  float z = cosPhi;

  return vec3(x, y, z);
}
`

// Thêm code xử lý loading và interactions
window.addEventListener('load', function() {
    // Hide loading overlay after 2 seconds
    setTimeout(() => {
        const loadingOverlay = document.getElementById('loadingOverlay');
        loadingOverlay.classList.add('hidden');
        
        // Remove loading overlay completely after transition
        setTimeout(() => {
            loadingOverlay.remove();
        }, 1000);
    }, 2000);
});

// Add keyboard shortcut to go to portfolio
document.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
        window.location.href = 'index.html';
    }
});

// Add click anywhere to go to portfolio (optional)
let clickTimer = null;
document.addEventListener('click', function(e) {
    // Double click anywhere to go to portfolio
    if (clickTimer === null) {
        clickTimer = setTimeout(() => {
            clickTimer = null;
        }, 300);
    } else {
        clearTimeout(clickTimer);
        clickTimer = null;
        window.location.href = 'index.html';
    }
});

// Prevent double-click on buttons from triggering portfolio navigation
document.querySelectorAll('a, button').forEach(element => {
    element.addEventListener('click', function(e) {
        e.stopPropagation();
    });
});

console.log('🌌 Galaxy Landing Page initialized');
console.log('💡 Tip: Press Enter/Space or double-click to go to portfolio');

    </script>
</body>
</html>